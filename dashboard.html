<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Dashboard - Students Hub</title>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2>Dashboard</h2>
    <a href="#" class="active" onclick="showSection('profile', event)">👤 Profile</a>
    <a href="#" onclick="showSection('skills', event)">💡 My Skills</a>
    <a href="#" onclick="showSection('earnings', event)">💰 Earnings</a>
    <a href="#" onclick="showSection('documents', event)">📄 My Documents</a>
    <a href="#" onclick="showSection('credits', event)">⭐ Credits</a>
    <a href="job.html" onclick="showSection('jobs', event)">💼 Jobs</a>

  </div>

  <!-- Main Area -->
  <div class="main">
    <!-- Top Navbar -->
    <div class="topbar">
      <h1>Students Hub</h1>
      <div class="top-actions">
        <button title="Notifications">🔔</button>
        <button title="Settings">⚙️</button>
        <button title="Logout" onclick="logout()">🚪 Logout</button>
      </div>
    </div>

    <!-- Content -->
    <div class="content">
      <!-- Profile -->
      <div id="profile" class="section active">
        <h2>My Profile</h2>
        <img src="https://via.placeholder.com/100" class="profile-pic" id="profilePic">
        <input type="file" id="uploadPic" accept="image/*">

        <div class="profile-info">
          <label>Name:</label>
          <p id="studentName">John Doe</p>

          <label>Contact:</label>
          <p id="studentContact">+254 700 000000</p>
          <input type="text" id="newContact" placeholder="Request contact change">
          <button onclick="requestContactChange()">Submit for Approval</button>

          <label>Email:</label>
          <p id="studentEmail">john@student.com</p>
        </div>
      </div>

      <!-- Skills -->
      <div id="skills" class="section">
        <h2>My Skills</h2>
        <ul class="skills-list" id="skillsList">
          <!-- Skills will be loaded from localStorage -->
        </ul>
        <input type="text" id="newSkill" placeholder="Add new skill">
        <button onclick="addSkill()">Add Skill</button>
      </div>

      <!-- Earnings -->
      <div id="earnings" class="section">
        <h2>Earnings</h2>
        <div class="earnings-summary">
          Total Earnings: <strong>KES 12,500</strong>
        </div>
        <ul class="earnings-history">
          <li>Delivery job - KES 1,500 (Jan 2025)</li>
          <li>Data entry - KES 3,000 (Feb 2025)</li>
          <li>Tutoring - KES 8,000 (Mar 2025)</li>
        </ul>
      </div>

      <!-- Documents -->
      <div id="documents" class="section">
        <h2>My Documents</h2>
        <div class="documents">
          <label>Upload Transcript</label>
          <input type="file" id="uploadTranscript">
          <label>Upload Resume</label>
          <input type="file" id="uploadResume">
          <label>Upload Recommendation Letter</label>
          <input type="file" id="uploadRecommendation">
        </div>
      </div>

      <!-- Credits -->
      <div id="credits" class="section">
        <h2>Credits</h2>
        <ul>
          <li>Completed delivery to CBD ✅</li>
          <li>Data entry for Gov Dept ✅</li>
        </ul>
      </div>
    </div>
  </div>
<!-- Jobs -->
<div id="jobs" class="section">
  <h2>Job Profile</h2>

  <div class="profile">
    <img id="jobProfilePicDash" src="https://via.placeholder.com/80">
    <div>
      <p><strong>Name:</strong> <span id="jobNameDash">John Doe</span></p>
      <p><strong>Contact:</strong> <span id="jobContactDash">+254 700 000000</span></p>
      <p><strong>Email:</strong> <span id="jobEmailDash">john@student.com</span></p>
    </div>
  </div>

  <div class="skills">
    <h3>Skills</h3>
    <ul id="jobSkillsDash"></ul>
  </div>

  <div class="earnings">
    <h3>Earnings</h3>
    <p id="jobEarningsDash">KES 0</p>
  </div>

  <div class="documents">
    <h3>Documents</h3>
    <ul id="jobDocumentsDash" class="document-list"></ul>
  </div>
</div>

  <!-- Scripts -->
  <script>
    // --- Show Section with Active Link ---
    function showSection(id, event) {
      document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
      document.getElementById(id).classList.add('active');

      document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
      event.currentTarget.classList.add('active');
    }

    // --- Load Data from localStorage ---
    function loadDashboardData() {
      // Profile
      const storedName = localStorage.getItem("studentName");
      if(storedName) document.getElementById("studentName").textContent = storedName;

      const storedContact = localStorage.getItem("studentContact");
      if(storedContact) document.getElementById("studentContact").textContent = storedContact;

      const storedEmail = localStorage.getItem("studentEmail");
      if(storedEmail) document.getElementById("studentEmail").textContent = storedEmail;

      const storedPic = localStorage.getItem("profilePic");
      if(storedPic) document.getElementById("profilePic").src = storedPic;

      // Skills
      const skills = JSON.parse(localStorage.getItem("skillsList")) || [];
      const ul = document.getElementById("skillsList");
      ul.innerHTML = "";
      skills.forEach(skill => {
        const li = document.createElement("li");
        li.textContent = skill;
        ul.appendChild(li);
      });

      // Earnings
      const storedEarnings = localStorage.getItem("earnings");
      if(storedEarnings) document.querySelector(".earnings-summary strong").textContent = `KES ${storedEarnings}`;
    }

    // --- Profile Picture Upload ---
    document.getElementById("uploadPic").addEventListener("change", function(e) {
      const file = e.target.files[0];
      if (file && file.type.startsWith("image/") && file.size < 2 * 1024 * 1024) {
        const reader = new FileReader();
        reader.onload = function(evt) {
          document.getElementById("profilePic").src = evt.target.result;
          localStorage.setItem("profilePic", evt.target.result);
        }
        reader.readAsDataURL(file);
      } else {
        alert("Please select an image smaller than 2MB.");
      }
    });

    // --- Skills Addition ---
    function addSkill() {
      const skillInput = document.getElementById("newSkill");
      const skill = skillInput.value.trim();
      if(skill !== "") {
        const skillsList = JSON.parse(localStorage.getItem("skillsList")) || [];
        if(!skillsList.includes(skill)) {
          skillsList.push(skill);
          localStorage.setItem("skillsList", JSON.stringify(skillsList));

          const li = document.createElement("li");
          li.textContent = skill;
          document.getElementById("skillsList").appendChild(li);
        }
        skillInput.value = "";
      }
    }

    // --- Contact Change Request ---
    function requestContactChange() {
      const newContact = document.getElementById("newContact").value.trim();
      if(newContact !== "") {
        alert("Contact change request submitted for approval: " + newContact);
        document.getElementById("newContact").value = "";
        localStorage.setItem("studentContact", newContact);
      }
    }

    // --- Logout ---
    function logout() {
      alert("You have been logged out.");
      window.location.href = "studentlanding.html";
    }

    // --- Load Dashboard Data on Start ---
    loadDashboardData();
    // --- Load Job Section Data ---
function loadJobSection() {
  // Profile info
  const profilePic = localStorage.getItem("profilePic");
  if(profilePic) document.getElementById("jobProfilePicDash").src = profilePic;

  const name = localStorage.getItem("studentName");
  if(name) document.getElementById("jobNameDash").textContent = name;

  const contact = localStorage.getItem("studentContact");
  if(contact) document.getElementById("jobContactDash").textContent = contact;

  const email = localStorage.getItem("studentEmail");
  if(email) document.getElementById("jobEmailDash").textContent = email;

  // Skills
  const skills = JSON.parse(localStorage.getItem("skillsList")) || [];
  const skillsUl = document.getElementById("jobSkillsDash");
  skillsUl.innerHTML = "";
  skills.forEach(skill => {
    const li = document.createElement("li");
    li.textContent = skill;
    skillsUl.appendChild(li);
  });

  // Earnings
  const earnings = localStorage.getItem("earnings") || 0;
  document.getElementById("jobEarningsDash").textContent = `KES ${earnings}`;

  // Documents
  const documents = JSON.parse(localStorage.getItem("documentsList")) || [];
  const docUl = document.getElementById("jobDocumentsDash");
  docUl.innerHTML = "";
  documents.forEach(doc => {
    const li = document.createElement("li");
    li.textContent = doc;
    docUl.appendChild(li);
  });
}

// --- Call every time dashboard loads or data changes ---
setInterval(loadJobSection, 1000); // Updates every 1 sec

  </script>
</body>
</html>
